<?php
class property_model extends CI_Model
 
{
/* we will use the function get_property */
  function get_property($city,$bedrooms,$minprice,$maxprice,$sellorrent,$page)
  {
<<<<<<< HEAD
    $results_per_page='4';
    $start=($page-1)*$results_per_page;
=======
   
    
    $results_per_page=4;
    $start=(($page-1)*$results_per_page);
    if($sellorrent!='NULL')
    $this->db->where('intention',$sellorrent);
    if($city!='NULL')
>>>>>>> 28362a781104daa6842290ddb360ab0c4bd8723f
    $this->db->where('city',$city);
    if($bedrooms!='NULL')
    $this->db->where('bedroom',$bedrooms);
    if($minprice!='' && $maxprice!='')
    $this->db->where("expected_price BETWEEN $minprice AND $maxprice");
    $this->db->select("SQL_CALC_FOUND_ROWS address",FALSE);
    $this->db->select("address");
    $this->db->select('expected_price');
<<<<<<< HEAD
    /*
    if($page==1)
      {
        $this->db->limit(0, $results_per_page);
      }
      */
      //if($start!='' && $results_per_page!=''){
      //$this->db->limit($results_per_page, $start);
     //}
      
    $q = $this->db->get('property',$results_per_page,$start);
    if($q->num_rows() > 0)
=======
    //if($start!='' && $results_per_page!='')
    //{
    
      $this->db->limit($results_per_page,$start);
     //} 
    
    $q = $this->db->get('property')->result_array(); // echo $this->db->last_query();
    $query = $this->db->query('SELECT FOUND_ROWS() AS `Count`');
    $data["totalres"] = $query->row()->Count;
    

    if(count($q) > 0)
>>>>>>> 28362a781104daa6842290ddb360ab0c4bd8723f
    {
      
      $data['result']=$q;    
      //var_dump($data);
      //exit;
      //die();
      return $data;
    }
  }
}