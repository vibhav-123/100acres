<?php

class Postproperty_controller extends CI_Controller {

	function __construct() {
		parent::__construct();
	}

	function register() {
	//Including validation library
		$this->load->helper('form');
		$this->load->library('form_validation');
		$this->form_validation->set_error_delimiters('<div class="error">', '</div>');
		$this->form_validation->set_rules('owner_type', 'Type of Owner', 'required');
		$this->form_validation->set_rules('sellorrent', 'Sell or Rent', 'required');
		$this->form_validation->set_rules('select_city', 'City', 'required');
		$this->form_validation->set_rules('address', 'Address', 'required');
		$this->form_validation->set_rules('select_value', 'No. of Bedrooms', 'required');
		//$this->form_validation->set_rules('price', 'Expected Price', 'required|regex_match[/^[0-9]$/]');
		$this->form_validation->run();
		//var_dump($this->form_validation->run());
		if ($this->form_validation->run() == FALSE) {
			$this->load->view('post_form');
		} 
		else {
		//Setting values for tabel columns
			$i='';
			$data = array(
			'id' => $i,
			'owner_type' => $this->input->post('owner_type'),
			'intention' => $this->input->post('sellorrent'),
			'city' => $this->input->post('selct_city'),
			'address' => $this->input->post('address'),
			'bedroom' => $this->input->post('select_value'),
			'expected_price' => $this->input->post('price'));
			
			//Transfering data to Model
			$this->load->model('postproperty_model');
			print_r($data,true);
			$this->postproperty_model->form_insert($data);
			//var_dump($this->db->last_query());
			//$data['message'] = 'Data Inserted Successfully';
			//Loading View
			$this->load->view('post_form_success');
		}
	}

	}

?>
