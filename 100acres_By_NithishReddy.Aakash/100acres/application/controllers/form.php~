<?php

class Form extends CI_Controller {
function __construct() {
parent::__construct();
$this->load->model('RegistrationData');
}
	function openForm(){
			$this->load->view('registrationview');	
	}

	function submit(){
		$this->load->model('RegistrationData');
			$data = array(
				'username' => $this->input->post('username'),
				'email' => $this->input->post('email'),
				'password' => $this->input->post('password'),
				'mobileno' => $this->input->post('mobileno')
				);			
			print_r($data);
			$this->RegistrationData->storedata($data);
			$this->load->view('formsuccess');


	}
	function index()
	{
		
		echo "here";
		$this->load->library('form_validation');

$this->form_validation->set_error_delimiters('<div class="error">', '</div>');

//Validating Name Field
		$this->form_validation->set_rules('username', 'Username', 'required|min_length[5]|max_length[15]');

//Validating Email Field
			$this->form_validation->set_rules('email', 'Email', 'required|valid_email');

//Validating password no. Field
		$this->form_validation->set_rules('password', 'Password', 'trim|required|matches[confirmpassword]');

		$this->form_validation->set_rules('confirmpassword', 'Confirmpassword', 'trim|required');
//Validating Mobile no. Field
		$this->form_validation->set_rules('mobileno', 'Mobile No.', 'required|regex_match[/^[0-9]{10}$/]');



	
			if ($this->form_validation->run() == FALSE) {
					$this->openForm();
			} 
		else
			{
				$this->submit();
			
		}
	}
}
?>
